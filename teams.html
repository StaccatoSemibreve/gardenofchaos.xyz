<html>
<head>
<title>The Garden of Chaos</title>
<link rel="stylesheet" href="/style.css">
<link rel="icon" type="image/png" href="FSgardenOfChao-196x196.png" sizes="196x196" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
</head>

<body>
<ul class="navbar">
  <li class="navbar"><a href="/index.html" class="navbar">Home</a></li>
  <li class="navbar"><a href="/rules.html" class="navbar">Rules</a></li>
  <li class="navbar"><a href="/styles.html" class="navbar">Formats</a></li>
  <li class="navbar"><a href="/rulesets.html" class="navbar">Rulesets</a></li>
  <li class="navbar"><a href="https://discord.gg/abWADS7" class="navbar">Discord</a></li>
  <li class="navbar"><a href="https://challonge.com/FSGardenofChaos4" class="navbar">Bracket</a></li>
  <li class="navbar"><a href="https://twitch.tv/danielstretulch" class="navbar">Stream</a></li>
  <li class="navbar"><a href="/events.html" class="navbar">Events</a></li>
  <li class="navbar"><a href="/commentators.html" class="navbar">Commentators</a></li>
  <li class="logo"><img src="FSgardenOfChao-196x196.png" class="logo" title="logo" alt="A logo of a happy chao in a circle, in the colours of the Fantasy Strike logo."></li>
</ul>
<h1>The Garden of Chaos</h1>
  <div id="teams">
    <div id="team1div">
    Team 1:
    <form id="team1" onsubmit='return false'>
      <input type="number" id="team1Size" placeholder="Team Size" min="1"/>
      <input type="button" value="Submit Team 1 Size" onclick="setTeam1Size()"/>
    </form>
    </div>

    <br>

    <div id="team2div">
    Team 2:
    <form id="team2" onsubmit='return false'>
      <input type="number" id="team2Size" placeholder="Team Size" min="0"/>
      <input type="button" value="Submit Team 2 Size" onclick="setTeam2Size()"/>
    </form>
    </div>
    
    <br>
    <div id="team1Remaining">
    </div>
    
    <br>
    <div id="team2Remaining">
    </div>
  </div>
</body>

<script>
var charSelect = '<option value="Grave">Grave</option><option value="Jaina">Jaina</option><option value="Geiger">Geiger</option><option value="Argagarg">Argagarg</option><option value="Setsuki">Setsuki</option><option value="Valerie">Valerie</option><option value="Rook">Rook</option><option value="Midori">Midori</option><option value="Lum">Lum</option><option value="Degrey">Degrey</option></select>';

var team1Size = 0;
var team1 = [];
var team1Remaining = [];
var team2Size = 0;
var team2 = [];
var team2Remaining = [];
var submit = false;

var match = 0;
var team1Member = "";
var team1N = -1;
var team2Member = "";
var team2N = -1;

function setTeam1Size() {
  team1Size = document.getElementById('team1Size').value;
  document.getElementById('team1').innerHTML = '';
  
  for(var count = 1; count <= team1Size; count++)
			document.getElementById('team1').innerHTML += '<select id="team1Select'+count+'">'+charSelect;
  document.getElementById('team1').innerHTML += '<input type="button" value="Submit Team 1 Members" onclick="setTeam1Members()"/>';
}

function setTeam2Size() {
  team2Size = document.getElementById('team2Size').value;
  document.getElementById('team2').innerHTML = '';
  
  for(var count = 1; count <= team2Size; count++)
			document.getElementById('team2').innerHTML += '<select id="team2Select'+count+'">'+charSelect;
  document.getElementById('team2').innerHTML += '<input type="button" value="Submit Team 2 Members" onclick="setTeam2Members()"/>';
}

function setTeam1Members() {
  for(var count = 1; count <= team1Size; count++)
    team1 = team1.concat(document.getElementById('team1Select'+count).value);
  document.getElementById('team1').outerHTML = team1.join(", ");
  if(submit) {play();}
  submit = true;
}
function setTeam2Members() {
  for(var count = 1; count <= team2Size; count++)
    team2 = team2.concat(document.getElementById('team2Select'+count).value);
  document.getElementById('team2').outerHTML = team2.join(", ");
  if(submit) {play();}
  submit = true;
}

function play() {
  document.getElementById('team1Remaining').innerHTML = 'Team 1 Remaining: '+team1.join(", ");
  document.getElementById('team2Remaining').innerHTML = 'Team 2 Remaining: '+team2.join(", ");
  
  if(team1Remaining.length == 0)
    team1Remaining = team1.slice(0);
  if(team2Remaining.length == 0)
    team2Remaining = team2.slice(0);
  
  if(team1.length == 0)
    document.getElementById('teams').innerHTML += '<br>Team 1 wins!!!';
  else if(team2.length == 0)
    document.getElementById('teams').innerHTML += '<br>Team 2 wins!!!';
  else {
    match++;
    document.getElementById('teams').innerHTML += '<br>Match '+ match +': Team 1 Candidates: ' + team1Remaining.join(", ") + '; Team 2 Candidates: ' + team2Remaining.join(", ");
    
    team1N = Math.floor(Math.random()*team1Remaining.length);
    team2N = Math.floor(Math.random()*team2Remaining.length);
    team1Member = team1Remaining.splice(team1N, 1)[0];
    team2Member = team2Remaining.splice(team2N, 1)[0];
    
    document.getElementById('teams').innerHTML += '<br>Team 1 Candidate ' + (team1N+1) + ' (' + team1Member + ') vs Team 2 Camdidate ' + (team2N+1) + ' (' + team2Member + ')<br>Winner: <select id="match'+match+'Winner"><option value="1">Team 1\'s ' + team1Member + '</option><option value="2">Team 2\'s ' + team2Member + '</option></select><input type="button" id="MatchButton" value="Submit Winner" onclick="win()"">';
  }
}
  
function win() {
  var winner = document.getElementById("match"+match+"Winner").value;
  document.getElementById("MatchButton").outerHTML = "";
  document.getElementById("match"+match+"Winner").outerHTML = "Team "+winner+" wins!<br>";
  if(winner == "1")
    team1.splice(team1N, 1);
  else
    team2.splice(team2N, 1);
  play();
}
</script>

</html>
